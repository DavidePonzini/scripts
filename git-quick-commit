#!/bin/bash -e

source $SCRIPTS/lib/messages

if [ -z "$(git status --porcelain)" ]; then
	_msg_success 'Nothing to commit.'
	exit 0
fi

git add .
_msg_success "Staged changes"

git status

r=`_msg_ask 'Reason'`

if [ -z "$r" ]; then
	r="Quick commit (`date +%d/%m/%y`)"
	_msg_warning "Using default commit message" "$r"
fi

git commit --quiet -m "$r"
_msg_success "Committed changes"

_msg_info_tmp 'Uploading commit...'
git push --quiet
_msg_success 'Uploaded commit'
